# Introducing the .bicepparam file

<!-- markdownlint-disable MD033 -->
<div style="width: 400px; height: 400px; overflow: hidden;">
  <img src="./.images/6th.png" alt="Bicep Advent Calendar" style="clip: rect(0px,60px,200px,0px);">
</div>
<!-- markdownlint-restore -->

## Introduction

In this blog post, we will learn about the new `.bicepparams` extension that can be used to replace the existing `.json` parameter files. We will also take a look at the `Bicepconfig.json` file and how it can be used to customize the development experience for Bicep templates.

## Bicep Parameters File

The Bicep parameters file is a new file extension that can be used to create an external parameter file using Bicep to extend on the parameters in the Bicep template. This is a great way to separate the parameters from the Bicep template and allows you to use the same parameters file across multiple Bicep templates. Bicep parameters file has the file extension of `.bicepparam`.

In the same way Bicep templates simplify the authoring experience for ARM templates, Bicep parameters files simplify the authoring experience over the traditional `.json` parameter files.

> [!NOTE]
> The Bicep parameters file is only supported in Bicep version 0.18.4 or newer, and [Azure CLI](/azure/developer/azure-developer-cli/install-azd?tabs=winget-windows%2Cbrew-mac%2Cscript-linux&pivots=os-windows) version 2.47.0 or newer.

A Bicep parameters file uses the following format:

``` bicep
using '<path>/<file-name>.bicep'

param <first-parameter-name> = <first-value>
param <second-parameter-name> = <second-value>
```

If take a look at yesterdays example and create a dedicated parameters file for this, we get:

``` bicep
using 'main.bicep' // This is the file path to the Bicep template

param location = 'australiaeast'
param tags = {
  applicationName: 'SAP Azure Landing Zone'
  owner: 'Platform Team'
  criticality: 'Tier1'
  contactEmail: 'stephen.tulp@insight.com'
  costCenter: '1234'
  dataClassification: 'Internal'
  environment: 'dev'
}
```

You can also define and use variables. Bicep CLI version 0.21.X or higher is required for using variables in `.bicepparam` file. Here are some examples:

``` bicep
using 'main.bicep' // This is the file path to the Bicep template

param location = 'australiaeast'
param tags = {
  applicationName: 'SAP Azure Landing Zone'
  owner: 'Platform Team'
  criticality: 'Tier1'
  contactEmail: 'stephen.tulp@insight.com'
  costCenter: '1234'
  dataClassification: 'Internal'
  environment: 'dev'
}

var resourceGroupPrefix = 'arg'
var locationPrefix = 'syd'
var lzPrefix = 'sap'
var environmentPrefix = 'dev'

```

### Parameter Types

The following example shows the formats of different parameter types: `string`, `integer`, `boolean`, `array`, and `object`.

``` bicep
using 'main.bicep'

param exampleString = 'test string'
param exampleInt = 2 + 2
param exampleBool = true
param exampleArray = [
  'value 1'
  'value 2'
]
param exampleObject = {
  property1: 'value 1'
  property2: 'value 2'
}
```

### Generating the Parameters File

We have two options to generate the parameters file:

- Use the `az bicep param generate` command

``` bash
az bicep generate-params --file main.bicep --output-format bicepparam --include-params all
```

The command creates a Bicep parameters file named `main.bicepparam`, the parameter file contains all parameters in the Bicep file, whether configured with default values or not.

- Use within Visual Studio Code

1. Open the Bicep template file in VSCode
2. Press `Ctrl+Shift+P` to open the command palette
3. Type `Bicep: Generate Parameter File` and press `Enter`
4. Select the output format `Bicep Parameters File (.bicepparam)`
5. Select the parameters to include in the parameter file (all, required, or none)
6. The parameter file is generated in the selected path
7. The parameter file is automatically associated with the Bicep template file

## The Bicepconfig file

The `Bicepconfig.json` file is a new file that can be used to customize the development experience for Bicep templates. The Bicep extension for Visual Studio Code supports intellisense for your bicepconfig.json file. Use the intellisense to discover available properties and values.

![Bicepconfig](./.images/bicepconfig.png)

Some of the properties that can be configured in the `Bicepconfig.json` file are:

- [Configure Bicep Module Paths](https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/bicep-config-modules)
- [Linting Rules and Settings](https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/bicep-config-linter)
- [Enabling Experimental Features](https://learn.microsoft.com/en-us/azure/azure-resource-manager/bicep/bicep-config#enable-experimental-features)

An example `Bicepconfig.json` file is outlined below.

``` json
{
  "analyzers": {
    "core": {
      "enabled": true,
      "verbose": true,
      "rules": {
        "adminusername-should-not-be-literal": {
          "level": "error"
        },
        "no-hardcoded-env-urls": {
          "level": "error"
        },
        "no-unnecessary-dependson": {
          "level": "error"
        },
        "no-unused-params": {
          "level": "error"
        },
        "no-unused-vars": {
          "level": "error"
        },
        "outputs-should-not-contain-secrets": {
          "level": "error"
        },
        "prefer-interpolation": {
          "level": "error"
        },
        "secure-parameter-default": {
          "level": "error"
        },
        "simplify-interpolation": {
          "level": "error"
        },
        "protect-commandtoexecute-secrets": {
          "level": "error"
        },
        "use-stable-vm-image": {
          "level": "error"
        },
        "explicit-values-for-loc-params": {
          "level": "off"
        },
        "no-hardcoded-location": {
          "level": "error"
        },
        "no-loc-expr-outside-params": {
          "level": "error"
        },
        "max-outputs": {
          "level": "error"
        },
        "max-params": {
          "level": "error"
        },
        "max-resources": {
          "level": "error"
        },
        "max-variables": {
          "level": "error"
        },
        "artifacts-parameters": {
          "level": "error"
        },
        "no-unused-existing-resources": {
          "level": "error"
        },
        "prefer-unquoted-property-names": {
          "level": "error"
        },
        "secure-secrets-in-params": {
          "level": "error"
        },
        "use-stable-resource-identifiers": {
          "level": "error"
        },
        "secure-params-in-nested-deploy": {
          "level": "error"
        },
        "use-recent-api-versions": {
          "level": "off"
        },
        "use-resource-id-functions": {
          "level": "error"
        }
      }
    }
  }
}
```

## Conclusion

Today we have learned about the new `.bicepparam` file extension and how it can be used to create an external parameter file using Bicep to extend on the parameters in the Bicep template. We also learned about the `Bicepconfig.json` file and how it can be used to customize the development experience for Bicep templates.
